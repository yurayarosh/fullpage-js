"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var s=n[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}function _defineProperty(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function ownKeys(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,s)}return e}function _objectSpread2(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(e,!0).forEach(function(t){_defineProperty(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ownKeys(e).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function checkPropertiesSupport(){Element.prototype.closest||console.warn("This browser does not support `closest` method. You should use polyfill."),"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")||console.warn("This browser does not support `Promise`. You should use polyfill.")}function createTouchEvents(t){function o(t,n){var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,!0,!0,t.target),t.target.dispatchEvent(e),e=null,!1}var a=!0,c={x:0,y:0},r={x:0,y:0},n={touchstart:function(t){c={x:t.touches[0].pageX,y:t.touches[0].pageY}},touchmove:function(t){a=!1,r={x:t.touches[0].pageX,y:t.touches[0].pageY}},touchend:function(t){if(a)o(t,"fc");else{var n=r.x-c.x,e=Math.abs(n),s=r.y-c.y,i=Math.abs(s);20<Math.max(e,i)&&o(t,i<e?n<0?"swl":"swr":s<0?"swu":"swd")}a=!0},touchcancel:function(t){a=!1}};for(var e in n)t.addEventListener(e,n[e],!1)}Object.defineProperty(exports,"__esModule",{value:!0});var Animator=function(){function d(t){var n=t.direction,e=t.sections,s=t.from,i=t.to,o=t.transition,a=t.easing,c=t.onExit,r=t.onEnter,l=t.fadeIn,h=t.fadeInDuration,u=t.customTransition,p=t.toggleClassesFirst;_classCallCheck(this,d),this.direction=n,this.sections=e,this.from=s,this.to=i,this.current=e[s],this.next=e[i],this.container=this.sections[0].parentNode,this.translate=0,this.transition=o,this.easing=a,this.onExit=c,this.onEnter=r,this.fadeIn=l,this.fadeInDuration=h,this.customTransition=u,this.toggleClassesFirst=p}return _createClass(d,[{key:"animate",value:function(){this._onExit().then(this._changeSection.bind(this)).then(this._onEnter.bind(this)).then(this._onComplete.bind(this))}},{key:"getSectionTop",value:function(t){return t.getBoundingClientRect().top}},{key:"fadeToggle",value:function(){var t=this;this.current.style.transition="opacity ".concat(this.fadeInDuration,"ms"),this.current.style.opacity=0,setTimeout(function(){t.current.style.display="none",t.current.style.transition="",t.current.classList.remove(d.classNames.IS_ACTIVE)},this.fadeInDuration),this.next.classList.add(d.classNames.IS_ACTIVE),this.next.style.display="",this.next.style.transition="opacity ".concat(this.fadeInDuration,"ms"),setTimeout(function(){t.next.style.opacity=1},66)}},{key:"scrollToSection",value:function(){var t=this,n=this.getSectionTop(this.container),e=this.getSectionTop(this.next)-n;this.translate=e,this.container.style.transform="translate(0px, -".concat(this.translate,"px)"),this.container.style.transition="transform ".concat(this.transition,"ms ").concat(this.easing),setTimeout(function(){t.container.style.transition="",t.toggleActiveClasses()},this.transition)}},{key:"toggleActiveClasses",value:function(){this.current.classList.remove(d.classNames.IS_ACTIVE),this.next.classList.add(d.classNames.IS_ACTIVE)}},{key:"_onExit",value:function(){var n=this;return new Promise(function(t){n.onExit?n.onExit(n.current,t):t()})}},{key:"_onEnter",value:function(){var n=this;return new Promise(function(t){n.onEnter?n.onEnter(n.next,t):t()})}},{key:"_onComplete",value:function(){this.finishTime=(new Date).getTime(),this.onComplete&&this.onComplete.call(this)}},{key:"_changeSection",value:function(){this.fadeIn?this.fadeToggle():this.customTransition?this.toggleActiveClasses():this.scrollToSection()}}]),d}();function addTouchEvents(){createTouchEvents(document)}Animator.classNames={IS_ACTIVE:"is-active"},checkPropertiesSupport();var Fullpage=function(){function c(t,n){_classCallCheck(this,c),this.container=t,this.sections=[].slice.call(this.container.children),this.defaultParams={delay:1e3,transition:500,easing:"ease",navigation:!1,renderNavButton:!1,prevButton:!1,nextButton:!1,fadeIn:!1,fadeInDuration:500,touchevents:!1,customTransition:!1,loop:!1,toggleClassesFirst:!1},this.options=_objectSpread2({},this.defaultParams,{},n),this.allowPagination=!0,this.current=0}return _createClass(c,[{key:"init",value:function(){this._addElementsAttributes(),this._crateNavigation(),this.paginateBinded=this.paginate.bind(this),this._paginate(),this.getIdFromUrl()&&1<this.getIdFromUrl().length&&this._paginateOnLoad(),this.afterLoad&&this.afterLoad()}},{key:"getIdFromUrl",value:function(){var t,n=window.location.href;if(-1!==n.indexOf("#")&&(t=n.substring(n.lastIndexOf("#"))),t)return t.slice(1)}},{key:"paginateToNext",value:function(t){this.direction=t?1:-1,this.next=this.current+this.direction}},{key:"paginateOnNavButtonClick",value:function(t,n){t.preventDefault();var e=+n.getAttribute(c.constants.index);"number"==typeof e&&(this.next=e,this.direction=this.next>this.current?1:-1)}},{key:"paginateOnAnchorClick",value:function(t,n){var e,s=n.getAttribute(c.constants.anchor);this.sections.forEach(function(t){(t.hasAttribute(c.constants.anchorId)?t.getAttribute(c.constants.anchorId):null)===s&&(e=t)}),this.next=+e.getAttribute(c.constants.index),this.direction=this.next>this.current?1:-1}},{key:"paginateOnPrevNextClick",value:function(t,n,e){t.preventDefault(),this.paginateToNext(e)}},{key:"toggleDisableButtonsClasses",value:function(){this.next===this.sections.length-1?this.options.nextButton.classList.add(c.constants.IS_DISABLED):this.options.nextButton.classList.remove(c.constants.IS_DISABLED),0===this.next?this.options.prevButton.classList.add(c.constants.IS_DISABLED):this.options.prevButton.classList.remove(c.constants.IS_DISABLED)}},{key:"paginate",value:function(t){var e=this;if(this.allowPagination){if("wheel"===t.type&&this.paginateToNext(0<t.deltaY),"click"===t.type){var n=t.target.closest(".".concat(c.constants.navButton)),s=t.target.closest("[".concat(c.constants.anchor,"]")),i=t.target.closest(".".concat(c.constants.prev)),o=t.target.closest(".".concat(c.constants.next));if(n&&this.paginateOnNavButtonClick(t,n),s&&this.paginateOnAnchorClick(t,s),(i||o)&&this.paginateOnPrevNextClick(t,i,o),null===n&&null===s&&null===i&&null===o)return}if(this.options.touchevents&&("swu"===t.type&&this.paginateToNext(!0),"swd"===t.type&&this.paginateToNext(!1)),!t.type){var a=t;this.sections.forEach(function(t,n){t.hasAttribute(c.constants.anchorId,a)&&(e.next=n)})}if(this.options.loop){if(this.next>this.sections.length-1?(this.next=0,this.loopTo="first"):this.next<0?(this.next=this.sections.length-1,this.loopTo="last"):this.loopTo=!1,this.next===this.current)return}else if(this.next>=this.sections.length||this.next<0||this.next===this.current)return;this.options.loop||this.toggleDisableButtonsClasses(),this.next>=this.sections.length||this.next<0||this.next===this.current||(this.allowPagination=!1,this.navigation.forEach(function(t){t.classList.remove(c.constants.IS_ACTIVE)}),this.navigation[this.next].classList.add(c.constants.IS_ACTIVE),this.options.toggleClassesFirst&&(this.sections[this.current].classList.remove(c.constants.IS_ACTIVE),this.sections[this.next].classList.add(c.constants.IS_ACTIVE)),this.startTime=(new Date).getTime(),this.animator=new Animator({direction:this.direction,sections:this.sections,from:this.current,to:this.next,transition:this.options.transition,easing:this.options.easing,onExit:this.onExit,onEnter:this.onEnter,fadeIn:this.options.fadeIn,fadeInDuration:this.options.fadeInDuration,customTransition:this.options.customTransition,toggleClassesFirst:this.options.toggleClassesFirst}),this.animator.onComplete=function(){e.onComplete&&e.onComplete(),e.current=e.next,e.animator.finishTime-e.startTime<e.options.delay?setTimeout(function(){e.allowPagination=!0},e.options.delay):e.allowPagination=!0},this.animator.animate())}}},{key:"_addElementsAttributes",value:function(){this.options.fadeIn&&(this.sections.forEach(function(t){t.classList.add(c.constants.IS_ABSOLUTE),t.style.opacity=0}),this.sections[0].style.opacity=1),this.sections[0].classList.add(c.constants.IS_ACTIVE),this.sections.forEach(function(t,n){t.setAttribute(c.constants.index,n)}),this.options.prevButton&&this.options.prevButton.classList.add(c.constants.prev),this.options.nextButton&&this.options.nextButton.classList.add(c.constants.next),this.options.loop||0===this.current&&this.options.prevButton.classList.add(c.constants.IS_DISABLED)}},{key:"_paginate",value:function(){var n=this;(this.options.touchevents?["wheel","click","swu","swd"]:["wheel","click"]).forEach(function(t){document.addEventListener(t,n.paginateBinded)})}},{key:"_paginateOnLoad",value:function(){this.paginate(this.getIdFromUrl())}},{key:"_crateNavigation",value:function(){if(this.options.navigation){var t=this.options.navigation;t.innerHTML='<ul class="'.concat(c.constants.navList,'"></ul>');for(var n=0;n<this.sections.length;n++){var e=t.querySelector("ul"),s=document.createElement("li");s.className=c.constants.navItem,this.options.renderNavButton?s.innerHTML=0===n?'<button class="'.concat(c.constants.navButton," ").concat(c.constants.IS_ACTIVE,'" ').concat(c.constants.index,'="').concat(n,'">').concat(this.options.renderNavButton(n),"</button>"):'<button class="'.concat(c.constants.navButton,'" ').concat(c.constants.index,'="').concat(n,'">').concat(this.options.renderNavButton(n),"</button>"):s.innerHTML=0===n?'<button class="'.concat(c.constants.navButton," ").concat(c.constants.IS_ACTIVE,'" ').concat(c.constants.index,'="').concat(n,'">').concat(n+1,"</button>"):'<button class="'.concat(c.constants.navButton,'" ').concat(c.constants.index,'="').concat(n,'">').concat(n+1,"</button>"),e.appendChild(s)}this.navigation=[].slice.call(t.querySelectorAll(".".concat(c.constants.navButton)))}}}]),c}();Fullpage.constants={IS_ACTIVE:"is-active",IS_ABSOLUTE:"is-absolute",IS_DISABLED:"is-disabled",navList:"fullpage-nav",navItem:"fullpage-nav__item",navButton:"fullpage-nav__button",prev:"fullpage__prev",next:"fullpage__next",anchor:"data-fullpage-anchor",anchorId:"data-fullpage-id",index:"data-fullpage-index"},exports.Fullpage=Fullpage,exports.addTouchEvents=addTouchEvents;
